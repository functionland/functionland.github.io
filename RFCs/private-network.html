<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<title data-react-helmet="true">Private Network | Functionland</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://functionland.github.io/RFCs/private-network"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Private Network | Functionland"><meta data-react-helmet="true" name="description" content="- Start Date: 2022-02-01"><meta data-react-helmet="true" property="og:description" content="- Start Date: 2022-02-01"><link data-react-helmet="true" rel="icon" href="/img/favicon.webp"><link data-react-helmet="true" rel="canonical" href="https://functionland.github.io/RFCs/private-network"><link data-react-helmet="true" rel="alternate" href="https://functionland.github.io/RFCs/private-network" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://functionland.github.io/RFCs/private-network" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.550d40eb.css">
<link rel="preload" href="/assets/js/runtime~main.0a8e0e27.js" as="script">
<link rel="preload" href="/assets/js/main.0aa87d37.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.webp" alt="functionland logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.webp" alt="functionland logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Functionland</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/functionland" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/getting-started-testnet">Getting Started with FxBlox</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/functionyard/mainnet-transition">Mainnet Transition</a><button aria-label="Toggle the collapsible sidebar category &#x27;Mainnet Transition&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/functionyard/hardware/fxblox-hardware">Hardware</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hardware&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/functionyard/add-storage">Add Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/functionyard/fxblox-app">FxBlox App Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/functionyard/support">Support</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/functionyard">Functionyard Testnet</a><button aria-label="Toggle the collapsible sidebar category &#x27;Functionyard Testnet&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/pinning-service">Pinning Service API</a><button aria-label="Toggle the collapsible sidebar category &#x27;Pinning Service API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/api-intro">Fula API</a><button aria-label="Toggle the collapsible sidebar category &#x27;Fula API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/whitepaper">Whitepaper</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_VCh3" aria-current="page" href="/RFCs/rfc-process">RFCs</a><button aria-label="Toggle the collapsible sidebar category &#x27;RFCs&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" tabindex="0" href="/RFCs/fula-sec">Security</a><button aria-label="Toggle the collapsible sidebar category &#x27;Security&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/RFCs/private-network">Private Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/RFCs/document-syncing">Document Syncing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/RFCs/personal-data-reserve">Personal Data Reserve</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/blockchain/blockchain-intro">Blockchain</a><button aria-label="Toggle the collapsible sidebar category &#x27;Blockchain&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/functionyard/troubleshooting">Troubleshooting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Private Network</h1><ul><li>Start Date: 2022-02-01</li><li>RFC PR: <a href="https://github.com/functionland/docs/pull/67" target="_blank" rel="noopener noreferrer">https://github.com/functionland/docs/pull/67</a></li><li>Functionland Issue: <a href="https://github.com/functionland/docs/issues/63" target="_blank" rel="noopener noreferrer">https://github.com/functionland/docs/issues/63</a></li><li>Status: Draft</li><li>Authors: <a href="https://github.com/farhoud" target="_blank" rel="noopener noreferrer">Farhoud</a></li><li>Reviewers: <a href="https://github.com/gitaaron" target="_blank" rel="noopener noreferrer">Aaron</a>, <a href="https://github.com/ehsan6sha" target="_blank" rel="noopener noreferrer">Ehsan</a>, <a href="https://github.com/orgs/functionland/people/masih" target="_blank" rel="noopener noreferrer">Masih</a></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="background">Background<a class="hash-link" href="#background" title="Direct link to heading">â€‹</a></h2><p>We are using IPFS as our file system. But IPFS is built to use for public data, and it does not support ACL,
So we need to find a way to keep users safe until our security layer becomes mature. And also ipfs-cluster <a href="https://cluster.ipfs.io/documentation/guides/security/#ports-overview" target="_blank" rel="noopener noreferrer">docs</a> recommended to have a secret.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="current-network">Current Network<a class="hash-link" href="#current-network" title="Direct link to heading">â€‹</a></h3><p>Our current network topology is too simple, its only base on webrtc-start and peer discovery is disabled.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="server">Server<a class="hash-link" href="#server" title="Direct link to heading">â€‹</a></h4><p>Node with roll of server is a js-libp2p node with our protocol&#x27;s and server side implementations (use js-ipfs as fs) that listen on <a href="https://github.com/functionland/fula/blob/main/libraries/fula-client/src/config.ts" target="_blank" rel="noopener noreferrer">webrtc-start</a>.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="client">Client<a class="hash-link" href="#client" title="Direct link to heading">â€‹</a></h4><p>Node with the roll of <a href="https://github.com/functionland/fula/tree/main/libraries/fula-client" target="_blank" rel="noopener noreferrer">client</a> (phone,webapp) are listening on <a href="https://github.com/functionland/fula/blob/main/libraries/fula-client/src/config.ts" target="_blank" rel="noopener noreferrer">webrtc-start</a> and when user provide the string peer id (<code>B58String</code>) of the box with <a href="https://docs.fx.land/api/client-instance#connect-to-box" target="_blank" rel="noopener noreferrer">connect</a> API, the api create multiAddress based on webrtc signaling server add it to libp2p peer store and keep the connection alive with the box.
also have to mention inbound connections are blocked.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="problem-statement">Problem Statement<a class="hash-link" href="#problem-statement" title="Direct link to heading">â€‹</a></h2><p>We need to protect users and their data from harms and risks of public networks and also cover the <a href="https://github.com/functionland/docs/issues/58" target="_blank" rel="noopener noreferrer">multi box scenario</a>.
The public network risks are:</p><ul><li>Anyone on the internet can connect to the box.</li><li>Anyone on the internet that is connected to the box can use bitswap to get data from the box.</li><li>Peer routing and Content discovery can leak what you are doing to the public.</li><li>deficiency in our encryption algorithm or key management can leak all user data to the public.</li><li>clusters running without a secret may discover and connect to the main IPFS network, which is mostly useless for the cluster peers (and for the IPFS network).</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="motivation">Motivation<a class="hash-link" href="#motivation" title="Direct link to heading">â€‹</a></h2><p>Isolating users from public networks can help us reduce the scope of work while maintaining the usefulness of our product, and testing our security layer without putting users in harm&#x27;s way.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="proposal">Proposal<a class="hash-link" href="#proposal" title="Direct link to heading">â€‹</a></h2><p>We can use built-in libp2p components to create a private network with encrypted communication.
The components are:</p><ul><li>Libp2p built-in private network. It uses a <a href="https://github.com/libp2p/js-libp2p/tree/master/src/pnet#private-shared-keys" target="_blank" rel="noopener noreferrer">private shared key</a> for creating an isolated network with encrypted communication.<ul><li><a href="https://github.com/libp2p/specs/blob/master/pnet/Private-Networks-PSK-V1.md" target="_blank" rel="noopener noreferrer">spec</a></li><li><a href="https://github.com/libp2p/js-libp2p/tree/master/src/pnet" target="_blank" rel="noopener noreferrer">js-doc</a></li></ul></li><li>Libp2p bootstrap for bootstrapping the network of boxes:<ul><li><a href="https://github.com/libp2p/js-libp2p-bootstrap" target="_blank" rel="noopener noreferrer">js-doc</a></li></ul></li></ul><p>In this way when a node comes online, Libp2p uses the key and the list of other node&#x27;s to join the network.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="scope-of-work">Scope of work<a class="hash-link" href="#scope-of-work" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="box">Box<a class="hash-link" href="#box" title="Direct link to heading">â€‹</a></h3><p>For box setup users provide an environment variable <code>FULA_NET_SECRET</code> which they should remember. and provide a list of node as <code>config.json</code></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="fula-client">FULA-Client<a class="hash-link" href="#fula-client" title="Direct link to heading">â€‹</a></h3><p>user calls <code>createClient</code> they should also provide the secret they used for setting up the boxes. and when he calls <code>connect</code> it should pass the list of string peerId&#x27;s</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="implementation">Implementation<a class="hash-link" href="#implementation" title="Direct link to heading">â€‹</a></h2><p>The box and client already support private-key but need to add test and fixes namings.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="box-1">Box<a class="hash-link" href="#box-1" title="Direct link to heading">â€‹</a></h3><p>In the <a href="https://github.com/functionland/fula/blob/main/apps/box/src/config.ts" target="_blank" rel="noopener noreferrer">Config</a> we should change the name <code>PKEY</code> to <code>FULA_NET_SECRET</code></p><p>We need to add <a href="https://github.com/libp2p/js-libp2p-bootstrap" target="_blank" rel="noopener noreferrer"><code>js-libp2p-bootstrap</code></a>  and
In the <a href="https://github.com/functionland/fula/blob/main/apps/box/src/config.ts" target="_blank" rel="noopener noreferrer">Config</a> we should add to support to load <code>config.json</code> in this format:</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx json"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;nodes&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token string" style="color:#e3116c">&quot;/ip4/104.131.131.82/tcp/4001/ipfs/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token string" style="color:#e3116c">&quot;/dnsaddr/bootstrap.libp2p.io/ipfs/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token string" style="color:#e3116c">&quot;/dnsaddr/bootstrap.libp2p.io/ipfs/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Which will be used for creating <code>js-libp2p-bootstrap</code> <a href="https://github.com/libp2p/js-libp2p-bootstrap" target="_blank" rel="noopener noreferrer">config</a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="fula-client-1">FULA-client<a class="hash-link" href="#fula-client-1" title="Direct link to heading">â€‹</a></h3><p>In <a href="https://github.com/functionland/fula/blob/main/libraries/fula-client/src/index.ts" target="_blank" rel="noopener noreferrer">fula-client</a> We have to change pkey to fulaSecret so:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">createClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Partial</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Libp2pOptions</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> constructorOptions</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pKey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Fula</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>to</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">createClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Partial</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Libp2pOptions</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> constructorOptions</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fulaSecret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Fula</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and change connect interface to get a list of peerId`s from:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">connect: (peerId: string) =&gt; Connection</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>to</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain"> connect: (peerId: [string]) =&gt; Connection</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>We need to change <a href="https://github.com/functionland/fula/blob/main/libraries/fula-client/src/connection.ts" target="_blank" rel="noopener noreferrer"><code>Connection</code></a> in the way that:</p><ul><li>Connection <code>Status</code><ul><li>If we connect to at least one box we are <code>Online</code>.</li><li>When we are not connected to any box and try to connect we are at <code>Connecting</code>.</li><li>When connection fails to all the serverPeerIds we Are <code>Offline</code>.</li></ul></li><li>Connection should have a list of <code>serverPeerId</code>.</li><li>Connect to all the <code>serverPeerId</code> and keep the connection alive.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="case-study">Case Study<a class="hash-link" href="#case-study" title="Direct link to heading">â€‹</a></h2><p>For dogfooding of new changes we can use a copy of <a href="https://github.com/functionland/fula/tree/main/examples/react-gallery" target="_blank" rel="noopener noreferrer">react-gallery</a> and change
the <a href="https://github.com/functionland/fula/blob/main/examples/react-gallery/src/components/BoxConfig.jsx" target="_blank" rel="noopener noreferrer"><code>BoxConfig</code></a>
to get list of comma seperated peerIds and <a href="https://github.com/functionland/fula/blob/main/examples/react-gallery/src/App.js" target="_blank" rel="noopener noreferrer"><code>App</code></a> should change to pass the list of peerId&#x27;s to fula-client.</p><p>Note: if example repo would be outside mono-repo we can just use branch for describing every functionality.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="alternative-approaches">Alternative approaches<a class="hash-link" href="#alternative-approaches" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="vpn">VPN<a class="hash-link" href="#vpn" title="Direct link to heading">â€‹</a></h3><p>Using VPN for creating the private network.</p><p>Disadvantage:</p><ul><li>It adds another point of failure to the system.</li><li>It is also not that decentralized.</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/RFCs/fula-sec/encryption"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Two-way Encryption Mechanism</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/RFCs/document-syncing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Document Syncing</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a><ul><li><a href="#current-network" class="table-of-contents__link toc-highlight">Current Network</a></li></ul></li><li><a href="#problem-statement" class="table-of-contents__link toc-highlight">Problem Statement</a></li><li><a href="#motivation" class="table-of-contents__link toc-highlight">Motivation</a></li><li><a href="#proposal" class="table-of-contents__link toc-highlight">Proposal</a></li><li><a href="#scope-of-work" class="table-of-contents__link toc-highlight">Scope of work</a><ul><li><a href="#box" class="table-of-contents__link toc-highlight">Box</a></li><li><a href="#fula-client" class="table-of-contents__link toc-highlight">FULA-Client</a></li></ul></li><li><a href="#implementation" class="table-of-contents__link toc-highlight">Implementation</a><ul><li><a href="#box-1" class="table-of-contents__link toc-highlight">Box</a></li><li><a href="#fula-client-1" class="table-of-contents__link toc-highlight">FULA-client</a></li></ul></li><li><a href="#case-study" class="table-of-contents__link toc-highlight">Case Study</a></li><li><a href="#alternative-approaches" class="table-of-contents__link toc-highlight">Alternative approaches</a><ul><li><a href="#vpn" class="table-of-contents__link toc-highlight">VPN</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.0a8e0e27.js"></script>
<script src="/assets/js/main.0aa87d37.js"></script>
</body>
</html>