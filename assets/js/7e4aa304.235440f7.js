"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8899],{5176:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>l,default:()=>h,frontMatter:()=>p,metadata:()=>s,toc:()=>m});var r=a(7462),o=(a(7294),a(3905)),n=a(2004),i=a.n(n);const p={title:"Re-imaging CM4",id:"fxblox-hardware-rpi-reimage"},l="Advanced Firmware Update Process",s={unversionedId:"functionyard/hardware/fxblox-hardware-rpi-reimage",id:"functionyard/hardware/fxblox-hardware-rpi-reimage",title:"Re-imaging CM4",description:"If for any reason the CM4 fulatower gets stuck in a blue/white light without going through the whole boot process, or it is not connected to the Wi-Fi or propagating the FxBlox hotspot, you need to perform a full re-image.",source:"@site/docs/functionyard/hardware/fxblox-hardware-rpi-reimage.md",sourceDirName:"functionyard/hardware",slug:"/functionyard/hardware/fxblox-hardware-rpi-reimage",permalink:"/functionyard/hardware/fxblox-hardware-rpi-reimage",tags:[],version:"current",frontMatter:{title:"Re-imaging CM4",id:"fxblox-hardware-rpi-reimage"},sidebar:"tutorialSidebar",previous:{title:"FxBlox Lite Plus (RK1)",permalink:"/functionyard/hardware/fxblox-hardware-rk1"},next:{title:"Re-imaging RK1",permalink:"/functionyard/hardware/fxblox-hardware-rk1-reimage"}},m=[{value:"Video Guide for Re-Imaging",id:"video-guide-for-re-imaging",children:[],level:2},{value:"Written Steps for Re-Imaging",id:"written-steps-for-re-imaging",children:[],level:2}],d={toc:m};function h(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"advanced-firmware-update-process"},"Advanced Firmware Update Process"),(0,o.kt)("p",null,"If for any reason the CM4 fulatower gets stuck in a blue/white light without going through the whole boot process, or it is not connected to the Wi-Fi or propagating the FxBlox hotspot, you need to perform a full re-image."),(0,o.kt)("h2",{id:"video-guide-for-re-imaging"},"Video Guide for Re-Imaging"),(0,o.kt)("center",null,(0,o.kt)(i(),{controls:!0,url:"https://youtu.be/Fi9jz-qOHxs?si=4sqX1mR-ccUxDOj7",mdxType:"ReactPlayer"})),(0,o.kt)("h2",{id:"written-steps-for-re-imaging"},"Written Steps for Re-Imaging"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Unplug the Tower from Power")),(0,o.kt)("p",{parentName:"li"},"Ensure the tower is not connected to any power source before proceeding.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Opening the Tower")),(0,o.kt)("p",{parentName:"li"},"Follow the instructions in the video linked above to open the tower safely.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Connect the USB-C Port")),(0,o.kt)("p",{parentName:"li"},"Connect the USB-C port on the side of the tower to your laptop or PC."),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("img",{alt:"Placeholder for USB-C connection image",src:a(7033).Z,width:"960",height:"1280"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Short Circuit the Two Pins")),(0,o.kt)("p",{parentName:"li"},"Short circuit the two pins located on the bottom left side of the Raspberry Pi module. You can use anything to short circuit them, like putting the head of a USC-C cable between them. But make sure the material you are using is conductive and not Aluminum for example (key rings for example are usually aluminum)"),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("img",{alt:"Placeholder for short circuit pins image",src:a(808).Z,width:"602",height:"800"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Power On the Tower")),(0,o.kt)("p",{parentName:"li"},"Plug the tower back into power. It should display a blue/white light and remain like that, indicating it is in image mode. You can remove the short circuit from step 4 at this stage.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Installing and Running rpiboot")),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"For Windows:")),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Download and install rpiboot from ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/raspberrypi/usbboot/raw/master/win32/rpiboot_setup.exe"},"here"),"."),(0,o.kt)("li",{parentName:"ul"},"Type ",(0,o.kt)("inlineCode",{parentName:"li"},"rpiboot")," in your search bar and run it. After a few seconds it starts printing some stuff and automatically closes after 15 seconds or so. Wait for the terminal to close before proceeding."))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"For Mac:")),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"git clone --recurse-submodules --shallow-submodules --depth=1 https://github.com/raspberrypi/usbboot\ncd usbboot\nbrew install libusb\nbrew install pkg-config\nmake\nsudo ./rpiboot\n")),(0,o.kt)("p",{parentName:"li"},"After a few seconds it starts printing some stuff and automatically closes after 15 seconds or so. Wait for the terminal to close before proceeding.")))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Download the Latest Image")),(0,o.kt)("p",{parentName:"li"},"Download the latest image for your CM4, from ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/functionland/rpi-image/releases/latest"},"the official GitHub repository"),". Download all the files that start with ",(0,o.kt)("inlineCode",{parentName:"p"},"rpi_cm4_fulimage")," into one folder on your computer.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Unzip the Image Content")),(0,o.kt)("p",{parentName:"li"},"Right click on downloaded zip and use ",(0,o.kt)("a",{parentName:"p",href:"https://www.7-zip.org/download.html"},"7zip application")," to extract. Extract the contents of the downloaded image to a known location on your computer.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Install and Run Raspberry Pi Imager")),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"For Windows:")," Download from ",(0,o.kt)("a",{parentName:"li",href:"https://downloads.raspberrypi.org/imager/imager_latest.exe"},"here"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"For Mac:")," Download from ",(0,o.kt)("a",{parentName:"li",href:"https://downloads.raspberrypi.org/imager/imager_latest.dmg"},"here"),"."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Configure Raspberry Pi Imager")),(0,o.kt)("p",{parentName:"li"},"Open Raspberry Pi Imager and select the following:"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Raspberry Pi Device:")," RASPBERRY PI 4"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Operating System:"),' Scroll down and choose "custom image," then select the ',(0,o.kt)("inlineCode",{parentName:"li"},".img")," file inside the folder you unzipped in the previous step."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Storage:"),' Click on "Choose storage" and select the newly added storage, which should be around 30GB and named RPi-Msd.')),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("img",{alt:"Placeholder for Raspberry Pi Imager configuration image",src:a(2556).Z,width:"1357",height:"951"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Start the Imaging Process")),(0,o.kt)("p",{parentName:"li"},'Click "Next." Choose "No" for the first popup asking if you want custom configs, and "Yes" for the second one asking for confirmation.')),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Wait for Completion")),(0,o.kt)("p",{parentName:"li"},"The imaging process might take about 3 hours. Please be patient.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Final Steps")),(0,o.kt)("p",{parentName:"li"},"After completion, remove the short circuit from the pins, disconnect the USB-C cable connecting the tower to the computer, and then unplug and re-plug the tower to power.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Set Up Using FxBlox App")),(0,o.kt)("p",{parentName:"li"},"Now that you have the updated fulatower, use the FxBlox app to set it up. There's no need for any other manual updates.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Closing the Tower")),(0,o.kt)("p",{parentName:"li"},"Once you've confirmed a successful setup through the FxBlox app, close up the tower again to protect it from damage."))),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"If at the end of setup, you see a message that the app could not connect to Blox, Close the app, unplug and re-plug the blox and wait for 1 minute and open the app.")))}h.isMDXComponent=!0},2556:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/raspberrypi-imager-0098395d6b13954a7d9ae647b1ad14dd.png"},808:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/rpi-shortcircuit-bc7eb70b313a56a44664ff935497ed96.jpg"},7033:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/rpi-usbc-reimage-1ac52347426ee09dc487c4ec047d0ce8.jpg"}}]);